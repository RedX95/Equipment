# Sequelize

## Использование ORM Sequelize в проекте
**Тема проекта:** Аренда строительного оборудования  
**Дисциплина:** Базы данных  

---

## 1. Назначение Sequelize

Sequelize — это ORM (Object-Relational Mapping) библиотека для Node.js, предназначенная для работы с реляционными базами данных, такими как PostgreSQL, MySQL и SQLite.

В данном проекте Sequelize используется для:
- подключения к базе данных PostgreSQL;
- описания структуры базы данных в виде моделей;
- автоматического создания таблиц;
- определения связей между таблицами;
- упрощения работы с SQL-запросами.

---

## 2. Подключение Sequelize к проекту

Для работы с Sequelize в проект были установлены следующие зависимости:
- sequelize;
- pg;
- pg-hstore;
- dotenv.

Подключение выполняется в файле `app/models/index.js`, где создаётся экземпляр Sequelize с использованием параметров из файла `.env`.

---

## 3. Конфигурация подключения к базе данных

Конфигурация базы данных вынесена в файл `app/config/db.config.js`.  
Параметры подключения (хост, порт, имя базы данных, пользователь и пароль) передаются через переменные окружения.

Это позволяет:
- не хранить конфиденциальные данные в коде;
- упростить настройку проекта;
- использовать Docker-контейнеры.

---

## 4. Модели данных

Каждая таблица базы данных описывается отдельной моделью Sequelize.  
Модели соответствуют концептуальной модели базы данных, разработанной в лабораторной работе №7.

Основные модели проекта:
- Category — категория оборудования;
- Equipment — оборудование;
- Client — клиент;
- Order — заказ аренды;
- Payment — платеж;
- PriceCategory — ценовая категория;
- OrderEquipment — оборудование в заказе.

Sequelize автоматически добавляет поля `id`, `createdAt` и `updatedAt`.

---

## 5. Связи между таблицами

В проекте реализованы следующие связи:
- один ко многим (категория → оборудование, клиент → заказы);
- многие ко многим (заказ ↔ оборудование).

Связь многие-ко-многим реализована с помощью промежуточной таблицы `OrderEquipment`.

---

## 6. Синхронизация моделей с базой данных

При запуске приложения выполняется синхронизация моделей с базой данных.  
Если таблицы отсутствуют, они создаются автоматически на основе описанных моделей.

---

## 7. Заполнение базы данных

Для заполнения базы данных тестовыми данными используется файл `seed.js`.  
Он позволяет проверить корректность структуры таблиц и связей между ними.

---

## 8. Преимущества использования Sequelize

Использование Sequelize позволяет:
- ускорить разработку серверного приложения;
- сократить количество SQL-кода;
- повысить читаемость и поддерживаемость проекта;
- упростить работу с базой данных PostgreSQL.

---

## 9. Вывод

В ходе работы была интегрирована ORM Sequelize в проект аренды строительного оборудования.  
Использование Sequelize позволило эффективно реализовать структуру базы данных и обеспечить удобное взаимодействие приложения с PostgreSQL.
